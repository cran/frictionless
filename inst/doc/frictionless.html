<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Peter Desmet" />


<title>Introduction to frictionless</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Introduction to frictionless</h1>
<h4 class="author">Peter Desmet</h4>



<div id="what-is-a-data-package" class="section level2">
<h2>What is a Data Package?</h2>
<p>A <a href="https://specs.frictionlessdata.io/data-package/">Data
Package</a> is a simple container format to describe and package a
collection of (tabular) data. It is typically used to publish FAIR and
open datasets. In this tutorial we will show you how to read, create,
edit and write Data Packages with the <strong>frictionless</strong>.</p>
</div>
<div id="read-a-data-package" class="section level2">
<h2>Read a Data Package</h2>
<p>Load frictionless with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(frictionless)</span></code></pre></div>
<p>To read a Data Package, you need to know the path or URL to its
descriptor file, named <code>datapackage.json</code>. That file
describes the Data Package, provides access points to its Data Resources
and can contain dataset-level metadata. Let’s read a Data Package
descriptor file published on <a href="https://doi.org/10.5281/zenodo.10053702">Zenodo</a>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>package <span class="ot">&lt;-</span> <span class="fu">read_package</span>(<span class="st">&quot;https://zenodo.org/records/10053702/files/datapackage.json&quot;</span>)</span></code></pre></div>
<p><code>read_package()</code> returns the content of
<code>datapackage.json</code> as a list with class
<code>datapackage</code>. When printing a Data Package, you get a
summary of its contents:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>package</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co">#&gt; A Data Package with 3 resources:</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co">#&gt; • reference-data</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co">#&gt; • gps</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co">#&gt; • acceleration</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="co">#&gt; For more information, see &lt;https://doi.org/10.5281/zenodo.10053702&gt;.</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="co">#&gt; Use `unclass()` to print the Data Package as a list.</span></span></code></pre></div>
<p>Since a Data Package is a list, you can pass it to functions that
work on lists, such as <code>str()</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">str</span>(package, <span class="at">list.len =</span> <span class="dv">3</span>)</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co">#&gt; List of 4</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="co">#&gt;  $ id       : chr &quot;https://doi.org/10.5281/zenodo.10053702&quot;</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co">#&gt;  $ profile  : chr &quot;tabular-data-package&quot;</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co">#&gt;  $ resources:List of 3</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 7</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="co">#&gt;   .. ..$ name     : chr &quot;reference-data&quot;</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="co">#&gt;   .. ..$ path     : chr &quot;O_WESTERSCHELDE-reference-data.csv&quot;</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="co">#&gt;   .. ..$ profile  : chr &quot;tabular-data-resource&quot;</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="co">#&gt;   .. .. [list output truncated]</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 7</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="co">#&gt;   .. ..$ name     : chr &quot;gps&quot;</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co">#&gt;   .. ..$ path     : chr [1:3] &quot;O_WESTERSCHELDE-gps-2018.csv.gz&quot; &quot;O_WESTERSCHELDE-gps-2019.csv.gz&quot; &quot;O_WESTERSCHELDE-gps-2020.csv.gz&quot;</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="co">#&gt;   .. ..$ profile  : chr &quot;tabular-data-resource&quot;</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="co">#&gt;   .. .. [list output truncated]</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 7</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="co">#&gt;   .. ..$ name     : chr &quot;acceleration&quot;</span></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a><span class="co">#&gt;   .. ..$ path     : chr [1:3] &quot;O_WESTERSCHELDE-acceleration-2018.csv.gz&quot; &quot;O_WESTERSCHELDE-acceleration-2019.csv.gz&quot; &quot;O_WESTERSCHELDE-acceleration-2020.csv.gz&quot;</span></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a><span class="co">#&gt;   .. ..$ profile  : chr &quot;tabular-data-resource&quot;</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a><span class="co">#&gt;   .. .. [list output truncated]</span></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a><span class="co">#&gt;   [list output truncated]</span></span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a><span class="co">#&gt;  - attr(*, &quot;class&quot;)= chr [1:2] &quot;datapackage&quot; &quot;list&quot;</span></span></code></pre></div>
<p>The most important aspect of a Data Package are its <strong>Data
Resources</strong>, which describe and point to the data. You can list
all included resources with <code>resources()</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">resources</span>(package)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;reference-data&quot; &quot;gps&quot;            &quot;acceleration&quot;</span></span></code></pre></div>
<p>This Data Package has 3 resources. Let’s read the data from the
<code>gps</code> resource into a data frame:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>gps <span class="ot">&lt;-</span> <span class="fu">read_resource</span>(package, <span class="st">&quot;gps&quot;</span>)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>gps</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="co">#&gt; # A tibble: 73,047 × 21</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co">#&gt;     `event-id` visible timestamp           `location-long` `location-lat`</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co">#&gt;          &lt;dbl&gt; &lt;lgl&gt;   &lt;dttm&gt;                        &lt;dbl&gt;          &lt;dbl&gt;</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co">#&gt;  1 14256075762 TRUE    2018-05-25 16:11:37            4.25           51.3</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="co">#&gt;  2 14256075763 TRUE    2018-05-25 16:16:41            4.25           51.3</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co">#&gt;  3 14256075764 TRUE    2018-05-25 16:21:29            4.25           51.3</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co">#&gt;  4 14256075765 TRUE    2018-05-25 16:26:28            4.25           51.3</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="co">#&gt;  5 14256075766 TRUE    2018-05-25 16:31:21            4.25           51.3</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="co">#&gt;  6 14256075767 TRUE    2018-05-25 16:36:09            4.25           51.3</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="co">#&gt;  7 14256075768 TRUE    2018-05-25 16:40:57            4.25           51.3</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="co">#&gt;  8 14256075769 TRUE    2018-05-25 16:45:55            4.25           51.3</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="co">#&gt;  9 14256075770 TRUE    2018-05-25 16:50:49            4.25           51.3</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="co">#&gt; 10 14256075771 TRUE    2018-05-25 16:55:36            4.25           51.3</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="co">#&gt; # ℹ 73,037 more rows</span></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="co">#&gt; # ℹ 16 more variables: `bar:barometric-pressure` &lt;dbl&gt;,</span></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a><span class="co">#&gt; #   `external-temperature` &lt;dbl&gt;, `gps:dop` &lt;dbl&gt;, `gps:satellite-count` &lt;dbl&gt;,</span></span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a><span class="co">#&gt; #   `gps-time-to-fix` &lt;dbl&gt;, `ground-speed` &lt;dbl&gt;, heading &lt;dbl&gt;,</span></span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a><span class="co">#&gt; #   `height-above-msl` &lt;dbl&gt;, `location-error-numerical` &lt;dbl&gt;,</span></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a><span class="co">#&gt; #   `manually-marked-outlier` &lt;lgl&gt;, `vertical-error-numerical` &lt;dbl&gt;,</span></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a><span class="co">#&gt; #   `sensor-type` &lt;chr&gt;, `individual-taxon-canonical-name` &lt;chr&gt;, …</span></span></code></pre></div>
<p>The data frame contains all GPS records, even though the actual data
were split over <a href="https://zenodo.org/records/10053702#files-heading">multiple CSV
zipped files</a>. <code>read_resource()</code> assigned the column names
and types based on the Table Schema that was defined for that resource,
not the headers of the CSV file.</p>
<p>You can also read data from a local (e.g. downloaded) Data Package.
In fact, there is one included in frictionless, let’s read that one from
disk:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>local_package <span class="ot">&lt;-</span> <span class="fu">read_package</span>(</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;datapackage.json&quot;</span>, <span class="at">package =</span> <span class="st">&quot;frictionless&quot;</span>)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>local_package</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co">#&gt; A Data Package with 3 resources:</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="co">#&gt; • deployments</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="co">#&gt; • observations</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="co">#&gt; • media</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="co">#&gt; Use `unclass()` to print the Data Package as a list.</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="fu">read_resource</span>(local_package, <span class="st">&quot;media&quot;</span>)</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 5</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="co">#&gt;   media_id                      deployment_id observation_id timestamp file_path</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;                         &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;     &lt;chr&gt;    </span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="co">#&gt; 1 aed5fa71-3ed4-4284-a6ba-3550… 1             1-1            2020-09-… https://…</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="co">#&gt; 2 da81a501-8236-4cbd-aa95-4bc4… 1             1-1            2020-09-… https://…</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="co">#&gt; 3 0ba57608-3cf1-49d6-a5a2-fe68… 1             1-1            2020-09-… https://…</span></span></code></pre></div>
<p>Data from the <code>media</code> was not stored in a CSV file, but
directly in the <code>data</code> property of that resource in
<code>datapackage.json</code>. <code>read_resource()</code> will
automatically detect where to read data from.</p>
</div>
<div id="create-and-edit-a-data-package" class="section level2">
<h2>Create and edit a Data Package</h2>
<p>Data Package is a good format to technically describe your data,
e.g. if you are planning to deposit it on research repository. It also
goes a long way meeting <a href="https://www.go-fair.org/fair-principles/">FAIR principles</a>.</p>
<p>Frictionless assumes your data are stored as a data frame or CSV
files. Let’s use the built-in dataset <code>iris</code> as your data
frame:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># Show content of the data frame &quot;iris&quot;</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">as_tibble</span>(iris)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="co">#&gt; # A tibble: 150 × 5</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co">#&gt;    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="co">#&gt;           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  </span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co">#&gt;  1          5.1         3.5          1.4         0.2 setosa </span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="co">#&gt;  2          4.9         3            1.4         0.2 setosa </span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="co">#&gt;  3          4.7         3.2          1.3         0.2 setosa </span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="co">#&gt;  4          4.6         3.1          1.5         0.2 setosa </span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="co">#&gt;  5          5           3.6          1.4         0.2 setosa </span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="co">#&gt;  6          5.4         3.9          1.7         0.4 setosa </span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="co">#&gt;  7          4.6         3.4          1.4         0.3 setosa </span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="co">#&gt;  8          5           3.4          1.5         0.2 setosa </span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="co">#&gt;  9          4.4         2.9          1.4         0.2 setosa </span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="co">#&gt; 10          4.9         3.1          1.5         0.1 setosa </span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a><span class="co">#&gt; # ℹ 140 more rows</span></span></code></pre></div>
<p>Create a Data Package with <code>create_package()</code> and add your
data frame as a resource with the name <code>iris</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># Load dplyr or magrittr to support %&gt;% pipes</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="fu">library</span>(dplyr, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>) <span class="co"># or library(magrittr)</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>my_package <span class="ot">&lt;-</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>  <span class="fu">create_package</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>  <span class="fu">add_resource</span>(<span class="at">resource_name =</span> <span class="st">&quot;iris&quot;</span>, <span class="at">data =</span> iris)</span></code></pre></div>
<p>Note that you can chain most frictionless functions together using
pipes (<code>%&gt;%</code> or <code>|&gt;</code>), which improves
readability.</p>
<p><code>my_package</code> now contains one resource:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>my_package</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="co">#&gt; A Data Package with 1 resource:</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="co">#&gt; • iris</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co">#&gt; Use `unclass()` to print the Data Package as a list.</span></span></code></pre></div>
<p>By default, <code>add_resource()</code> will create a <strong>Table
Schema</strong> for your data frame, describing its field names, field
types and (for factors) constraints. You can retrieve the schema of a
resource with <code>get_schema()</code>. It is a list, which we print
here using <code>str()</code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>iris_schema <span class="ot">&lt;-</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>  my_package <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>  <span class="fu">get_schema</span>(<span class="st">&quot;iris&quot;</span>)</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="fu">str</span>(iris_schema)</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">#&gt; List of 1</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="co">#&gt;  $ fields:List of 5</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 2</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="co">#&gt;   .. ..$ name: chr &quot;Sepal.Length&quot;</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="co">#&gt;   .. ..$ type: chr &quot;number&quot;</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 2</span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="co">#&gt;   .. ..$ name: chr &quot;Sepal.Width&quot;</span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a><span class="co">#&gt;   .. ..$ type: chr &quot;number&quot;</span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 2</span></span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a><span class="co">#&gt;   .. ..$ name: chr &quot;Petal.Length&quot;</span></span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a><span class="co">#&gt;   .. ..$ type: chr &quot;number&quot;</span></span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 2</span></span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a><span class="co">#&gt;   .. ..$ name: chr &quot;Petal.Width&quot;</span></span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a><span class="co">#&gt;   .. ..$ type: chr &quot;number&quot;</span></span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 3</span></span>
<span id="cb12-21"><a href="#cb12-21" tabindex="-1"></a><span class="co">#&gt;   .. ..$ name       : chr &quot;Species&quot;</span></span>
<span id="cb12-22"><a href="#cb12-22" tabindex="-1"></a><span class="co">#&gt;   .. ..$ type       : chr &quot;string&quot;</span></span>
<span id="cb12-23"><a href="#cb12-23" tabindex="-1"></a><span class="co">#&gt;   .. ..$ constraints:List of 1</span></span>
<span id="cb12-24"><a href="#cb12-24" tabindex="-1"></a><span class="co">#&gt;   .. .. ..$ enum: chr [1:3] &quot;setosa&quot; &quot;versicolor&quot; &quot;virginica&quot;</span></span></code></pre></div>
<p>You can also create a schema from a data frame, using
<code>create_schema()</code>:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>iris_schema <span class="ot">&lt;-</span> <span class="fu">create_schema</span>(iris)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="fu">str</span>(iris_schema)</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="co">#&gt; List of 1</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="co">#&gt;  $ fields:List of 5</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 2</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="co">#&gt;   .. ..$ name: chr &quot;Sepal.Length&quot;</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="co">#&gt;   .. ..$ type: chr &quot;number&quot;</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 2</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="co">#&gt;   .. ..$ name: chr &quot;Sepal.Width&quot;</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="co">#&gt;   .. ..$ type: chr &quot;number&quot;</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 2</span></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a><span class="co">#&gt;   .. ..$ name: chr &quot;Petal.Length&quot;</span></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a><span class="co">#&gt;   .. ..$ type: chr &quot;number&quot;</span></span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 2</span></span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a><span class="co">#&gt;   .. ..$ name: chr &quot;Petal.Width&quot;</span></span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a><span class="co">#&gt;   .. ..$ type: chr &quot;number&quot;</span></span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 3</span></span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a><span class="co">#&gt;   .. ..$ name       : chr &quot;Species&quot;</span></span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a><span class="co">#&gt;   .. ..$ type       : chr &quot;string&quot;</span></span>
<span id="cb13-21"><a href="#cb13-21" tabindex="-1"></a><span class="co">#&gt;   .. ..$ constraints:List of 1</span></span>
<span id="cb13-22"><a href="#cb13-22" tabindex="-1"></a><span class="co">#&gt;   .. .. ..$ enum: chr [1:3] &quot;setosa&quot; &quot;versicolor&quot; &quot;virginica&quot;</span></span></code></pre></div>
<p>Doing so allows you to customize the schema before adding the
resource. E.g. let’s add a description for
<code>Sepal.Length</code>:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>iris_schema<span class="sc">$</span>fields[[<span class="dv">1</span>]]<span class="sc">$</span>description <span class="ot">&lt;-</span> <span class="st">&quot;Sepal length in cm.&quot;</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="co"># Show result</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="fu">str</span>(iris_schema<span class="sc">$</span>fields[[<span class="dv">1</span>]])</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co">#&gt; List of 3</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="co">#&gt;  $ name       : chr &quot;Sepal.Length&quot;</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="co">#&gt;  $ type       : chr &quot;number&quot;</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="co">#&gt;  $ description: chr &quot;Sepal length in cm.&quot;</span></span></code></pre></div>
<p>Since schema is a list, you can use <code>{purrr}</code> to edit
multiple elements at once:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># Remove description for first field</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>iris_schema<span class="sc">$</span>fields[[<span class="dv">1</span>]]<span class="sc">$</span>description <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="co"># Set descriptions for all fields</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>descriptions <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>  <span class="st">&quot;Sepal length in cm.&quot;</span>,</span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>  <span class="st">&quot;Sepal width in cm.&quot;</span>,</span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>  <span class="st">&quot;Pedal length in cm.&quot;</span>,</span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a>  <span class="st">&quot;Pedal width in cm.&quot;</span>,</span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a>  <span class="st">&quot;Iris species.&quot;</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a>)</span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a>iris_schema<span class="sc">$</span>fields <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">imap</span>(</span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a>  iris_schema<span class="sc">$</span>fields,</span>
<span id="cb15-14"><a href="#cb15-14" tabindex="-1"></a>  <span class="sc">~</span> <span class="fu">c</span>(.x, <span class="at">description =</span> descriptions[.y])</span>
<span id="cb15-15"><a href="#cb15-15" tabindex="-1"></a>)</span>
<span id="cb15-16"><a href="#cb15-16" tabindex="-1"></a></span>
<span id="cb15-17"><a href="#cb15-17" tabindex="-1"></a><span class="fu">str</span>(iris_schema)</span>
<span id="cb15-18"><a href="#cb15-18" tabindex="-1"></a><span class="co">#&gt; List of 1</span></span>
<span id="cb15-19"><a href="#cb15-19" tabindex="-1"></a><span class="co">#&gt;  $ fields:List of 5</span></span>
<span id="cb15-20"><a href="#cb15-20" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 3</span></span>
<span id="cb15-21"><a href="#cb15-21" tabindex="-1"></a><span class="co">#&gt;   .. ..$ name       : chr &quot;Sepal.Length&quot;</span></span>
<span id="cb15-22"><a href="#cb15-22" tabindex="-1"></a><span class="co">#&gt;   .. ..$ type       : chr &quot;number&quot;</span></span>
<span id="cb15-23"><a href="#cb15-23" tabindex="-1"></a><span class="co">#&gt;   .. ..$ description: chr &quot;Sepal length in cm.&quot;</span></span>
<span id="cb15-24"><a href="#cb15-24" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 3</span></span>
<span id="cb15-25"><a href="#cb15-25" tabindex="-1"></a><span class="co">#&gt;   .. ..$ name       : chr &quot;Sepal.Width&quot;</span></span>
<span id="cb15-26"><a href="#cb15-26" tabindex="-1"></a><span class="co">#&gt;   .. ..$ type       : chr &quot;number&quot;</span></span>
<span id="cb15-27"><a href="#cb15-27" tabindex="-1"></a><span class="co">#&gt;   .. ..$ description: chr &quot;Sepal width in cm.&quot;</span></span>
<span id="cb15-28"><a href="#cb15-28" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 3</span></span>
<span id="cb15-29"><a href="#cb15-29" tabindex="-1"></a><span class="co">#&gt;   .. ..$ name       : chr &quot;Petal.Length&quot;</span></span>
<span id="cb15-30"><a href="#cb15-30" tabindex="-1"></a><span class="co">#&gt;   .. ..$ type       : chr &quot;number&quot;</span></span>
<span id="cb15-31"><a href="#cb15-31" tabindex="-1"></a><span class="co">#&gt;   .. ..$ description: chr &quot;Pedal length in cm.&quot;</span></span>
<span id="cb15-32"><a href="#cb15-32" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 3</span></span>
<span id="cb15-33"><a href="#cb15-33" tabindex="-1"></a><span class="co">#&gt;   .. ..$ name       : chr &quot;Petal.Width&quot;</span></span>
<span id="cb15-34"><a href="#cb15-34" tabindex="-1"></a><span class="co">#&gt;   .. ..$ type       : chr &quot;number&quot;</span></span>
<span id="cb15-35"><a href="#cb15-35" tabindex="-1"></a><span class="co">#&gt;   .. ..$ description: chr &quot;Pedal width in cm.&quot;</span></span>
<span id="cb15-36"><a href="#cb15-36" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 4</span></span>
<span id="cb15-37"><a href="#cb15-37" tabindex="-1"></a><span class="co">#&gt;   .. ..$ name       : chr &quot;Species&quot;</span></span>
<span id="cb15-38"><a href="#cb15-38" tabindex="-1"></a><span class="co">#&gt;   .. ..$ type       : chr &quot;string&quot;</span></span>
<span id="cb15-39"><a href="#cb15-39" tabindex="-1"></a><span class="co">#&gt;   .. ..$ constraints:List of 1</span></span>
<span id="cb15-40"><a href="#cb15-40" tabindex="-1"></a><span class="co">#&gt;   .. .. ..$ enum: chr [1:3] &quot;setosa&quot; &quot;versicolor&quot; &quot;virginica&quot;</span></span>
<span id="cb15-41"><a href="#cb15-41" tabindex="-1"></a><span class="co">#&gt;   .. ..$ description: chr &quot;Iris species.&quot;</span></span></code></pre></div>
<p>Let’s add <code>iris</code> as a resource to your Data Package again,
but this time with the customized schema. Let’s also add
<code>title</code> and <code>description</code> as a metadata
properties. Note that you have to remove the originally added resource
<code>iris</code> with <code>remove_resource()</code> first, since Data
Packages can only contain uniquely named resources:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>my_package <span class="ot">&lt;-</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>  my_package <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>  <span class="fu">remove_resource</span>(<span class="st">&quot;iris&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># Remove originally added resource</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>  <span class="fu">add_resource</span>(</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>    <span class="at">resource_name =</span> <span class="st">&quot;iris&quot;</span>,</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>    <span class="at">data =</span> iris,</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>    <span class="at">schema =</span> iris_schema, <span class="co"># Your customized schema</span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Iris dataset&quot;</span>, <span class="co"># Your additional metadata</span></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>    <span class="at">description =</span> <span class="st">&quot;The built-in dataset in R.&quot;</span></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>  )</span></code></pre></div>
<p>If you already have your data stored as CSV or TSV files and you want
to include them <em>as is</em> as a Data Resource, you can do so as
well. As with data frames, you can opt to create a Table Schema
automatically or provide your own.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co"># Two TSV files with the same structure</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>path_1 <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;observations_1.tsv&quot;</span>, <span class="at">package =</span> <span class="st">&quot;frictionless&quot;</span>)</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>path_2 <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;observations_2.tsv&quot;</span>, <span class="at">package =</span> <span class="st">&quot;frictionless&quot;</span>)</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="co"># Add both TSV files as a single resource</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>my_package <span class="ot">&lt;-</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>  my_package <span class="sc">%&gt;%</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>  <span class="fu">add_resource</span>(</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>    <span class="at">resource_name =</span> <span class="st">&quot;observations&quot;</span>,</span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">c</span>(path_1, path_2),</span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a>    <span class="at">delim =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span></span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a>  )</span></code></pre></div>
<p>Your Data Package now contains 2 resources, but you can add metadata
properties as well (see the <a href="https://specs.frictionlessdata.io/data-package/#metadata">Data
Package documentation</a> for an overview). Since it is a list, you can
use <code>append()</code> to insert properties at the desired place.
Let’s add <code>name</code> as first and <code>title</code> as second
property:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>my_package <span class="ot">&lt;-</span> <span class="fu">append</span>(my_package, <span class="fu">c</span>(<span class="at">name =</span> <span class="st">&quot;my_package&quot;</span>), <span class="at">after =</span> <span class="dv">0</span>)</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>my_package <span class="ot">&lt;-</span> <span class="fu">append</span>(my_package, <span class="fu">c</span>(<span class="at">title =</span> <span class="st">&quot;My package&quot;</span>), <span class="at">after =</span> <span class="dv">1</span>)</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="co"># Warning: append() drops the custom datapackage class.</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="co"># It can be added again by running my_package through create_package()</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>my_package <span class="ot">&lt;-</span> <span class="fu">create_package</span>(my_package)</span></code></pre></div>
<p>Note that in the above steps you started a Data Package from scratch
with <code>create_package()</code>, but you can use the same
functionality to edit an existing Data Package read with
<code>read_package()</code>.</p>
</div>
<div id="write-a-data-package" class="section level2">
<h2>Write a Data Package</h2>
<p>Now that you have created your Data Package, you can write it to a
directory of your choice with <code>write_package()</code>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="fu">write_package</span>(my_package, <span class="st">&quot;my_directory&quot;</span>)</span></code></pre></div>
<p>The directory will contain four files: the descriptor
<code>datapackage.json</code>, one CSV file containing the data for the
resource <code>iris</code> and two TSV files containing the data for the
resource <code>observations</code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">list.files</span>(<span class="st">&quot;my_directory&quot;</span>)</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;datapackage.json&quot;   &quot;iris.csv&quot;           &quot;observations_1.tsv&quot; &quot;observations_2.tsv&quot;</span></span></code></pre></div>
<p>Frictionless does not provide functionality to deposit your Data
Package on a research repository such as <a href="https://zenodo.org">Zenodo</a>, but here are some tips:</p>
<ol style="list-style-type: decimal">
<li>Validate your Data Package before depositing. You can do this in
Python with the <a href="https://github.com/frictionlessdata/frictionless-py">Frictionless
Framework</a> using
<code>frictionless validate datapackage.json</code>.</li>
<li>Use <code>compress = TRUE</code> in <code>write_package()</code> to
reduce the size of the deposit. It will zip the individual CSV files,
not the entire Data Package. That way, users still have direct access to
the <code>datapackage.json</code> file. See <a href="https://zenodo.org/records/10053702#files-heading">this
example</a>.</li>
<li>Only describe the technical aspects of your dataset in
<code>datapackage.json</code> (fields, units, the dataset identifier in
<code>id</code>). Authors, methodology, license, etc. are better
described in the metadata fields the research repository provides.</li>
</ol>
<p>We also recommend having a look at <code>{deposits}</code>, which
provides a universal interface to deposit and access data in a research
repository. It uses frictionless under the hood.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
